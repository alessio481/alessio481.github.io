<!DOCTYPE html>
<html>
<head>
	<title>Esempio di formattazione del testo</title>
</head>
<body>
	<pre>




int rosso = 11, verde = 13, giallo = 12, pin_pulsante = 10,intervallo = 1000, conta = 0,stato_bottone = 1, stato_bottone_precedente = 0;
bool verde_acceso = false, rosso_acceso = false, giallo_acceso = false, semaforo_acceso = true;
unsigned long tempo = 0;


void setup() {
pinMode(verde,OUTPUT);
pinMode(giallo,OUTPUT);
pinMode(rosso,OUTPUT);
pinMode(pin_pulsante,INPUT_PULLUP);
Serial.begin(9600);
}

void loop() {
  stato_bottone = digitalRead(pin_pulsante);
  if(stato_bottone !=  stato_bottone_precedente){
    if(stato_bottone == HIGH){
      semaforo_acceso = !semaforo_acceso;
      verde_acceso = semaforo_acceso ? true : false;
      giallo_acceso = false;
      rosso_acceso = false;
      Serial.println(semaforo_acceso);
      }
    }
    stato_bottone_precedente =  stato_bottone;
  if(semaforo_acceso && millis() - tempo >= intervallo){
    if(verde_acceso){verde_acceso = false; giallo_acceso = true;}
    else if(giallo_acceso){giallo_acceso = false; rosso_acceso = true;}
    else if(rosso_acceso){rosso_acceso = false; verde_acceso = true;}
    else{Serial.println("qualcosa non va");}
    tempo = millis();
    }
  if(!semaforo_acceso && millis() - tempo >= intervallo){
      giallo_acceso = !giallo_acceso;
      tempo = millis();
      }
 
  
  digitalWrite(verde,verde_acceso);
  digitalWrite(rosso,rosso_acceso);
  digitalWrite(giallo,giallo_acceso);
}
	</pre>
</body>
</html>
